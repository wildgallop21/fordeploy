{"ast":null,"code":"import _taggedTemplateLiteral from\"/Users/dayoon_sohn/Desktop/sparta/deploy/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";import _slicedToArray from\"/Users/dayoon_sohn/Desktop/sparta/deploy/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5,_templateObject6,_templateObject7,_templateObject8;// import Logo from \"../assets/logo.svg\";\n// import styled from \"styled-components\";\n// import { useNavigate } from \"react-router-dom\";\nimport React from\"react\";import{useEffect,useState}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{__deleteReviews,__getReviews,__putReviews}from\"../Redux/modules/reviewSlice\";import{useNavigate,useParams}from\"react-router-dom\";import styled from\"styled-components\";import Logo from\"../assets/logo.svg\";import axios from\"axios\";import{useLocation}from\"react-router-dom\";import{__getComments,__postComments}from\"../Redux/modules/commentSlice\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Review=function Review(){var dispatch=useDispatch();var navigate=useNavigate();var _useState=useState(null),_useState2=_slicedToArray(_useState,2),detailreviews=_useState2[0],setDetailReviews=_useState2[1];var location=useLocation();var param=useParams();var _useState3=useState(\"댓글달아보시지\"),_useState4=_slicedToArray(_useState3,2),comment=_useState4[0],setComment=_useState4[1];var _useParams=useParams(),id=_useParams.id;console.log(typeof id);var paramsComment=parseInt(id);var onClickDeleteButtonHandler=function onClickDeleteButtonHandler(movieID){console.log(movieID);dispatch(__deleteReviews(movieID));alert(\"삭제가 완료 되었습니다!\");navigate(\"/list\");};var onClickPutButtonHandler=function onClickPutButtonHandler(movieID){console.log(movieID);// dispatch(__putReviews((movieID)))\nalert(\"내용을 수정해주세요!\");navigate(\"/put/\".concat(movieID));// console.log(    dispatch(__deleteReviews()))\n// console.log(typeof(params.id))\n};// const fetchComments = async () => {\n//   // const { comment } = await axios.get(\"http://localhost:3001/comments\",{Id:param?.id});\n//   const { comment } = await axios.get(\"http://localhost:3001/comments\", {\n//     Id: param.id,\n//   });\n//   setComment(...comment, comment);\n//   // console.log(\"bbbb\");\n//   // console.log(comment);\n//   //undefined\n//   // console.log(param);\n// };\nvar addComment=function addComment(e){e.preventDefault();if(comment===\"\"){alert(\"댓글을 작성 해주세요.\");}dispatch(__postComments({// reviewsId:params,\nreviewsId:params.id,comment:comment}));setComment(\"\");};var commentHandle=function commentHandle(e){setComment(e.target.value);};useEffect(function(){// dispatch(getBoardAsync(params));\n// fetchComments();\ndispatch(__getReviews());dispatch(__getComments());},[dispatch]);var params=useParams();// console.log(comment)\n// console.log(paramsComment)\nvar reviews=useSelector(function(state){return state.reviews.reviews;});var comments=useSelector(function(state){return state.comments.comments;});var filteredComments=comments.filter(function(el){return el.reviewsId===id;});console.log(filteredComments);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"header\",{children:[/*#__PURE__*/_jsx(Logobox,{children:/*#__PURE__*/_jsx(\"img\",{className:\"logo\",src:Logo,alt:\"\\uB85C\\uACE0\"})}),/*#__PURE__*/_jsx(\"button\",{className:\"now_movie_list\",onClick:function onClick(){navigate(\"/\");},children:\"home\"})]}),/*#__PURE__*/_jsx(Reviews,{children:reviews.filter(function(el){return el.id===params.id;}).map(function(reviews){return console.log(\"movie_title\",reviews.movie_title),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"post\"}),/*#__PURE__*/_jsx(\"img\",{src:reviews.picture,alt:\"poster\"}),/*#__PURE__*/_jsx(\"h1\",{children:\"title\"}),/*#__PURE__*/_jsx(\"p\",{children:reviews.movie_title}),/*#__PURE__*/_jsx(\"h1\",{children:\"star\"}),/*#__PURE__*/_jsx(\"p\",{children:reviews.star}),/*#__PURE__*/_jsx(\"h1\",{children:\"content\"}),/*#__PURE__*/_jsx(\"p\",{children:reviews.content}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:function onClick(){return onClickDeleteButtonHandler(params.id);},children:\"del\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:function onClick(){return onClickPutButtonHandler(params.id);},children:\"put\"})}),/*#__PURE__*/_jsxs(CommentContainer,{children:[/*#__PURE__*/_jsx(Comment,{id:paramsComment}),/*#__PURE__*/_jsx(CommentInput,{value:comment,type:\"text\",onChange:commentHandle}),/*#__PURE__*/_jsx(CommentBtn,{onClick:addComment,type:\"submit\",children:\"\\uB313\\uAE00 \\uCD94\\uAC00\"})]})]},reviews.id);})}),/*#__PURE__*/_jsx(Comments,{children:filteredComments.map(function(comment){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"p\",{children:comment.comment})},comment.id);})})]});};var Logobox=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  width: 350px;\\n  margin: 0px auto 0 auto;\\n\"])));var Reviews=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  border: 1px solid;\\n  margin: 3%;\\n  padding: 10px;\\n\"])));var Comments=styled.div(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  border: 1px solid;\\n  margin: 3%;\\n  padding: 10px;\\n\"])));var Comment=styled.div(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\"])));var CommentContainer=styled.form(_templateObject5||(_templateObject5=_taggedTemplateLiteral([\"\\n  width: 800px;\\n  height: auto;\\n  margin: 20px auto;\\n\"])));var CommentBox=styled.div(_templateObject6||(_templateObject6=_taggedTemplateLiteral([\"\\n  width: 800px;\\n  height: 35px;\\n  margin: 20px auto;\\n  display: flex;\\n  border: 1px solid black;\\n\"])));var CommentInput=styled.input(_templateObject7||(_templateObject7=_taggedTemplateLiteral([\"\\n  width: 800px;\\n  height: 30px;\\n  margin: 0 auto;\\n  display: flex;\\n  border: 1px solid black;\\n\"])));var CommentBtn=styled.button(_templateObject8||(_templateObject8=_taggedTemplateLiteral([\"\\n  width: 80px;\\n  height: 30px;\\n  margin: 10px auto;\\n  display: flex;\\n  justify-content: center;\\n\"])));export default Review;","map":{"version":3,"names":["React","useEffect","useState","useDispatch","useSelector","__deleteReviews","__getReviews","__putReviews","useNavigate","useParams","styled","Logo","axios","useLocation","__getComments","__postComments","Review","dispatch","navigate","detailreviews","setDetailReviews","location","param","comment","setComment","id","console","log","paramsComment","parseInt","onClickDeleteButtonHandler","movieID","alert","onClickPutButtonHandler","addComment","e","preventDefault","reviewsId","params","commentHandle","target","value","reviews","state","comments","filteredComments","filter","el","map","movie_title","picture","star","content","Logobox","div","Reviews","Comments","Comment","CommentContainer","form","CommentBox","CommentInput","input","CommentBtn","button"],"sources":["/Users/dayoon_sohn/Desktop/sparta/deploy/src/components/Review.jsx"],"sourcesContent":["// import Logo from \"../assets/logo.svg\";\n// import styled from \"styled-components\";\n// import { useNavigate } from \"react-router-dom\";\n\nimport React from \"react\";\nimport { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport {\n  __deleteReviews,\n  __getReviews,\n  __putReviews,\n} from \"../Redux/modules/reviewSlice\";\nimport { useNavigate, useParams } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport Logo from \"../assets/logo.svg\";\nimport axios from \"axios\";\nimport { useLocation } from \"react-router-dom\";\nimport { __getComments, __postComments } from \"../Redux/modules/commentSlice\";\n\nconst Review = () => {\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n  const [detailreviews, setDetailReviews] = useState(null);\n  const location = useLocation();\n  const param = useParams();\n  const [comment, setComment] = useState(\"댓글달아보시지\");\n  const { id } = useParams();\n\n  console.log(typeof(id))\n  const paramsComment = parseInt(id);\n  const onClickDeleteButtonHandler = (movieID) => {\n    console.log(movieID);\n    dispatch(__deleteReviews(movieID));\n    alert(\"삭제가 완료 되었습니다!\");\n    navigate(\"/list\");\n  };\n\n  const onClickPutButtonHandler = (movieID) => {\n    console.log(movieID);\n    // dispatch(__putReviews((movieID)))\n    alert(\"내용을 수정해주세요!\");\n    navigate(`/put/${movieID}`);\n    // console.log(    dispatch(__deleteReviews()))\n    // console.log(typeof(params.id))\n  };\n\n  // const fetchComments = async () => {\n  //   // const { comment } = await axios.get(\"http://localhost:3001/comments\",{Id:param?.id});\n  //   const { comment } = await axios.get(\"http://localhost:3001/comments\", {\n  //     Id: param.id,\n  //   });\n  //   setComment(...comment, comment);\n  //   // console.log(\"bbbb\");\n  //   // console.log(comment);\n  //   //undefined\n  //   // console.log(param);\n  // };\n  const addComment = (e) => {\n    e.preventDefault();\n    if (comment === \"\") {\n      alert(\"댓글을 작성 해주세요.\");\n    }\n    dispatch(\n      __postComments({\n        // reviewsId:params,\n        reviewsId: params.id,\n        comment: comment,\n      })\n    );\n    setComment(\"\");\n  };\n  const commentHandle = (e) => {\n    setComment(e.target.value);\n  };\n  useEffect(() => {\n    // dispatch(getBoardAsync(params));\n    // fetchComments();\n    dispatch(__getReviews());\n    dispatch(__getComments());\n  }, [dispatch]);\n\n  let params = useParams();\n  // console.log(comment)\n  // console.log(paramsComment)\n\n  const reviews = useSelector((state) => state.reviews.reviews);\n  const comments = useSelector((state) => state.comments.comments);\n\n  const filteredComments = comments.filter((el)=> el.reviewsId === id )\n\n  console.log(filteredComments)\n  \n  return (\n    <div>\n      <header>\n        <Logobox>\n          <img className=\"logo\" src={Logo} alt=\"로고\" />\n        </Logobox>\n        <button\n          className=\"now_movie_list\"\n          onClick={() => {\n            navigate(\"/\");\n          }}\n        >\n          home\n        </button>\n      </header>\n      <Reviews>\n        {reviews\n          .filter((el) => el.id === params.id)\n          .map(\n            (reviews) => (\n              console.log(\"movie_title\", reviews.movie_title),\n              (\n                <div key={reviews.id}>\n                  <h1>post</h1>\n                  <img src={reviews.picture} alt=\"poster\" />\n                  <h1>title</h1>\n                  <p>{reviews.movie_title}</p>\n                  <h1>star</h1>\n                  <p>{reviews.star}</p>\n                  <h1>content</h1>\n                  <p>{reviews.content}</p>\n\n                  <div>\n                    <button\n                      type=\"button\"\n                      onClick={() => onClickDeleteButtonHandler(params.id)}\n                    >\n                      del\n                    </button>\n                  </div>\n                  <div>\n                    <button\n                      type=\"button\"\n                      onClick={() => onClickPutButtonHandler(params.id)}\n                    >\n                      put\n                    </button>\n                  </div>\n                  <CommentContainer>\n                    <Comment id={paramsComment}></Comment>\n                    <CommentInput\n                      value={comment}\n                      type=\"text\"\n                      onChange={commentHandle}\n                    />\n                    <CommentBtn onClick={addComment} type=\"submit\">\n                      댓글 추가\n                    </CommentBtn>\n                  </CommentContainer>\n                </div>\n              )\n            )\n          )}\n      </Reviews>\n      <Comments>\n      {filteredComments\n          .map(\n            (comment) => (\n              <div key={comment.id}>\n              <p>{comment.comment}</p>\n              </div>\n            ))\n        }        \n      </Comments>\n        </div>\n  );\n};\n\nconst Logobox = styled.div`\n  width: 350px;\n  margin: 0px auto 0 auto;\n`;\nconst Reviews = styled.div`\n  border: 1px solid;\n  margin: 3%;\n  padding: 10px;\n`;\nconst Comments = styled.div`\n  border: 1px solid;\n  margin: 3%;\n  padding: 10px;\n`;\n\nconst Comment = styled.div``;\n\nconst CommentContainer = styled.form`\n  width: 800px;\n  height: auto;\n  margin: 20px auto;\n`;\n\nconst CommentBox = styled.div`\n  width: 800px;\n  height: 35px;\n  margin: 20px auto;\n  display: flex;\n  border: 1px solid black;\n`;\n\nconst CommentInput = styled.input`\n  width: 800px;\n  height: 30px;\n  margin: 0 auto;\n  display: flex;\n  border: 1px solid black;\n`;\n\nconst CommentBtn = styled.button`\n  width: 80px;\n  height: 30px;\n  margin: 10px auto;\n  display: flex;\n  justify-content: center;\n`;\nexport default Review;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}